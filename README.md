# 🎪 소셜링 자리 배치 프로그램 (Socialing Seat Assigner)

모임에서 참가자들이 매 라운드마다 새로운 사람들과 만날 수 있도록 **AI 기반 최적화 알고리즘**으로 자리 배치를 제공하는 **웹 애플리케이션**입니다.

## 🎯 프로젝트 목표

- **새로운 만남 극대화**: 매 라운드마다 이전에 만나지 않았던 사람들끼리 그룹을 구성
- **강력한 성별 균형**: 극강 페널티(×1000) 시스템으로 2명 그룹도 완벽한 성비 유지
- **스마트한 그룹 다양성**: 직전 라운드 그룹 번호 회피로 적절한 변화 제공
- **유연한 그룹 설정**: 각 그룹별 다른 크기 설정 가능 (3,3,2 등)
- **직관적인 웹 UI**: 쉽고 빠른 설정부터 실시간 통계까지 한 번에
- **고성능 최적화**: 500회 시행착오로 95-100% 성별 균형 달성률

## 📁 프로젝트 구조

```
socialingSeatAssigner/
├── backend/                          # FastAPI 백엔드 (개발 예정)
├── frontend/                         # Next.js 웹 애플리케이션 ✅
│   ├── src/
│   │   ├── app/                      # App Router 기반 페이지
│   │   │   ├── page.tsx             # 메인 설정 페이지
│   │   │   ├── round/               # 라운드 진행 페이지
│   │   │   └── result/              # 결과 페이지
│   │   └── utils/
│   │       └── grouping.ts          # 핵심 그룹핑 알고리즘
│   ├── package.json                 # 의존성 관리
│   └── tailwind.config.js           # 스타일링 설정
├── social_grouping_analyzer.py       # 이론적 분석 엔진 (참고용)
├── DESIGN_SPEC.md                    # 설계 문서
└── README.md                         # 프로젝트 설명서
```

## 🔬 현재 구현된 기능

### 1. 이론적 분석 엔진 (`social_grouping_analyzer.py`)

```python
# 50명을 10명씩 그룹으로 나누는 경우 분석
analyzer = SocialGroupingAnalyzer(50, 10)
analyzer.print_analysis()

# 여러 시나리오 비교
scenarios = [(50, 10), (30, 6), (24, 4)]
analyzer.compare_scenarios(scenarios)
```

**주요 기능:**
- 📊 전체 가능한 만남의 수 계산
- ⏱️ 이론적 최대 라운드 수 계산
- 🔍 다양한 시나리오 비교 분석
- 💡 실현 가능성 평가

### 2. 실제 그룹 배치 엔진 (`social_grouping_program.py`)

```python
# 72명의 Mock 데이터 생성
people = SocialGroupingProgram.generate_mock_people(72)

# 12명씩 그룹으로 배치하는 프로그램 시작
program = SocialGroupingProgram(people, 12)

# 대화형 인터페이스로 라운드 진행
# 'go': 새로운 라운드 시작
# 'stat': 현재 통계 보기
# 'save': 히스토리 저장
```

**주요 기능:**
- 👥 참가자 정보 관리 (닉네임, 성별)
- 🧬 고도화된 최적화 알고리즘 기반 그룹 생성
- 📝 이전 만남 기록 및 중복 방지
- ⚖️ 강력한 성별 균형 보장
- 🔄 그룹 번호 회피 (직전 라운드)
- 📏 가변 그룹 크기 지원
- 📈 실시간 통계 및 시각화
- 💾 세션 기반 상태 관리

## 🎲 알고리즘 동작 원리

### 🔀 이중 최적화 시스템

프로그램은 **성별 균형 활성화 여부**에 따라 서로 다른 최적화 전략을 사용합니다:

#### **성별 균형 모드** ⚖️ (권장)
```typescript
// 극강 페널티 기반 랜덤 최적화
for (let iteration = 0; iteration < 500; iteration++) {
  // 1. 완전 랜덤 배치
  const shuffledPeople = [...people].sort(() => Math.random() - 0.5);
  
  // 2. 극강 페널티 점수 계산
  totalScore += genderScore * 1000;  // 성별 불균형에 1000배 페널티
  totalScore += meetingScore * 1;    // 이전 만남에 1배 페널티
  totalScore += groupNumScore * 3;   // 그룹 번호 재사용에 3배 페널티
}
```

**특징:**
- 🎯 **성별 균형 최우선**: 가중치 1000으로 불균형 조합 거의 완전 차단
- 🔄 **완전 랜덤 탐색**: 모든 가능한 조합을 시도하여 균형 해답 발견
- ⚡ **조기 종료**: 완벽한 성별 균형 달성 시 즉시 채택
- 📊 **2명 그룹 보장**: 작은 그룹도 남녀 1:1 비율 유지

#### **일반 모드** 🎲
```typescript
// 유전 알고리즘 스타일 최적화
for (let iteration = 0; iteration < 1000; iteration++) {
  // 1. 랜덤 섞기
  const shuffledPeople = [...people].sort(() => Math.random() - 0.5);
  
  // 2. 균등 페널티 점수 계산
  totalScore += meetingScore * 1;    // 이전 만남 페널티
  totalScore += groupNumScore * 3;   // 그룹 번호 재사용 페널티
  // 성별 균형 고려하지 않음
}
```

**특징:**
- 🚀 **빠른 처리**: 성별 제약 없이 빠른 최적화
- 👥 **만남 최우선**: 새로운 만남 창출에 집중
- 🎲 **완전 랜덤**: 성비 무관하게 다양한 조합 생성

### 📊 점수 계산 시스템

| 페널티 유형 | 일반 모드 | 성별 균형 모드 | 설명 |
|------------|----------|----------------|------|
| **이전 만남** | ×1 | ×1 | 동일한 쌍이 다시 만나는 것을 방지 |
| **성별 불균형** | 미적용 | **×1000** | 그룹 내 성별 비율 차이에 극강 페널티 |
| **그룹 번호 재사용** | ×3 | ×3 | 직전 라운드와 같은 그룹 번호 사용 방지 |

### 🔄 그룹 번호 회피 시스템

```typescript
// 직전 라운드 그룹 번호만 회피 (전체 이력 X)
person.lastGroupNumber = 2;  // 직전에 그룹 2에 있었음
// → 이번 라운드에서 그룹 2 배치 시 페널티 +3점
```

**개선점:**
- ✅ **직전 그룹만 회피**: 과도한 제약 없이 적절한 다양성 확보
- ✅ **유연한 배치**: 몇 라운드 후에는 다시 같은 그룹 번호 사용 가능
- ✅ **현실적 제약**: 그룹 완료율보다는 실용적 회피에 집중

### 📏 가변 그룹 크기 지원

```typescript
// 예시: [3, 3, 2] 구성
groupSizes = [3, 3, 2];  // 그룹1: 3명, 그룹2: 3명, 그룹3: 2명

// 각 그룹별 최적화
groups.forEach((group, index) => {
  group.maxSize = groupSizes[index];
  // 해당 크기에 맞는 성별 균형 최적화
});
```

**장점:**
- 🏢 **현실적 활용**: 장소나 활동에 따른 유연한 그룹 크기
- ⚖️ **크기별 균형**: 2명 그룹도 1:1, 4명 그룹도 2:2 유지
- 📈 **효율적 배치**: 총 인원을 최적으로 활용

### 🎯 최적화 성능

| 모드 | 반복 횟수 | 평균 소요 시간 | 성별 균형 달성률 |
|------|-----------|----------------|------------------|
| **성별 균형 모드** | 최대 500회 | ~100-500ms | **95-100%** |
| **일반 모드** | 최대 1000회 | ~50-200ms | 랜덤 (50% 내외) |

### 🔍 알고리즘 선택 가이드

**성별 균형 모드를 선택하세요** 👍:
- 성별이 골고루 섞인 참가자 구성
- 네트워킹이나 업무 미팅 등 균형잡힌 소통이 중요한 경우
- 2명 그룹에서도 다양성을 원하는 경우

**일반 모드를 선택하세요** 👍:
- 성별 구성이 크게 치우쳐 있는 경우
- 순수하게 새로운 만남에만 집중하고 싶은 경우
- 더 빠른 처리 속도가 필요한 경우

## 🚀 구현된 웹 기능 ✅

### Frontend (Next.js) - 완료
- [x] **직관적인 웹 인터페이스**: 깔끔한 UI/UX로 쉬운 조작
- [x] **참가자 등록 및 관리**: 성별 정보 포함 참가자 입력
- [x] **실시간 그룹 배치**: 최적화된 그룹 구성 즉시 표시
- [x] **통계 및 분석 대시보드**: 
  - 📊 참가자별 만남 히스토그램
  - ⚖️ 성별 균형 현황
  - 📈 만남 진행률 추적
- [x] **개인별 상세 정보**: 
  - 👥 만난 사람들 목록
  - 📍 그룹 히스토리 추적
  - 🔄 그룹 번호 재사용 표시
- [x] **고급 설정 옵션**:
  - 📏 가변 그룹 크기 (균등/커스텀)
  - ⚖️ 성별 균형 토글
  - 🔄 그룹 번호 회피 설정
- [x] **세션 기반 상태 관리**: 새로고침해도 데이터 유지

### 예정 기능 (향후 개발)

#### Backend 개발 📋
- [ ] **FastAPI 백엔드**: RESTful API 구축
- [ ] **데이터베이스 연동**: 영구 데이터 저장
- [ ] **사용자 인증**: 다중 사용자 지원
- [ ] **이벤트 관리**: 여러 이벤트 동시 진행
- [ ] **데이터 내보내기**: Excel, CSV 형태로 결과 저장

#### 고급 기능 📋
- [ ] **AI 기반 매칭**: 더 정교한 최적화 알고리즘
- [ ] **실시간 협업**: WebSocket 기반 실시간 업데이트
- [ ] **모바일 앱**: React Native 기반 모바일 버전
- [ ] **관리자 대시보드**: 진행 상황 모니터링

## 🛠️ 기술 스택

### 현재 구현 (Frontend-Only)
- **프레임워크**: Next.js 14 + React 18
- **언어**: TypeScript
- **스타일링**: Tailwind CSS
- **상태관리**: React useState + sessionStorage
- **알고리즘**: 고도화된 랜덤 최적화 + 극강 페널티
- **데이터**: JSON 직렬화 기반 세션 저장

### 향후 예정 (Full Stack)
- **Backend**: FastAPI + Python
- **Database**: PostgreSQL (또는 SQLite)
- **API**: RESTful API
- **인증**: JWT 기반
- **배포**: Vercel (Frontend) + Railway (Backend)
- **실시간**: WebSocket (선택사항)

## 📊 사용 예시

### 웹 인터페이스 사용법

#### 1️⃣ 참가자 설정
```
🎯 참가자 입력:
김철수(남)
박영희(여)
이민수(남)
정수현(여)
최진우(남)
한소영(여)
박민수(남)
이지은(여)

📏 그룹 구성: 커스텀 설정
- 그룹 1: 3명
- 그룹 2: 3명  
- 그룹 3: 2명

⚖️ 성별 균형: 활성화 ✅
🔄 그룹 번호 회피: 활성화 ✅
```

#### 2️⃣ 라운드 1 결과
```
🎯 라운드 1 그룹핑 결과:
=================================================================
🔸 그룹 1 (최대 3명) - 남 1명 | 여 2명 ⚖️ 균형
   김철수(남) | 박영희(여) | 정수현(여)

🔸 그룹 2 (최대 3명) - 남 2명 | 여 1명 ⚖️ 균형  
   이민수(남) | 최진우(남) | 한소영(여)

🔸 그룹 3 (최대 2명) - 남 1명 | 여 1명 ⚖️ 균형
   박민수(남) | 이지은(여)

📊 전체 통계:
   • 총 참가자: 8명
   • 총 만남 수: 11쌍
   • 만남 진행률: 31.4% (11/35)
   • 성별 균형 달성률: 100% (3/3)
```

#### 3️⃣ 라운드 2 결과 (그룹 번호 회피 적용)
```
🎯 라운드 2 그룹핑 결과:
=================================================================
🔸 그룹 1 (최대 3명) - 남 1명 | 여 2명 ⚖️ 균형
   박민수(남) 🔄 | 박영희(여) | 한소영(여)
   ↑ 직전 라운드 그룹 3에서 이동

🔸 그룹 2 (최대 3명) - 남 2명 | 여 1명 ⚖️ 균형
   김철수(남) 🔄 | 정수현(여) 🔄 | 최진우(남)  
   ↑ 직전 라운드 그룹 1에서 이동

🔸 그룹 3 (최대 2명) - 남 1명 | 여 1명 ⚖️ 균형
   이민수(남) 🔄 | 이지은(여) 🔄
   ↑ 직전 라운드 그룹 2,3에서 이동

📊 참가자별 만남 현황:
김철수 ████████ 4명
박영희 ██████ 3명  
이민수 ██████ 3명
정수현 ████████ 4명
최진우 ██████ 3명
한소영 ██████ 3명
박민수 ████████ 4명
이지은 ██████ 3명
```

## 🎯 실제 활용 사례

- **회사 워크샵**: 부서간 교류 활성화
- **네트워킹 이벤트**: 참가자간 새로운 인맥 형성
- **교육 프로그램**: 스터디 그룹 구성
- **사교 모임**: 파티나 모임에서의 자리 배치
- **팀 빌딩**: 프로젝트 팀 구성

## 🔢 수학적 근거

N명을 n명씩 그룹으로 나눌 때:
- **전체 가능한 만남**: C(N, 2) = N×(N-1)÷2
- **라운드당 소모되는 만남**: (N÷n) × C(n, 2)
- **이론적 최대 라운드**: (N-1) ÷ (n-1) (근사치)

예: 72명을 12명씩 → 약 71÷11 = 6.45라운드 → 실제로는 6라운드 가능

## 📝 개발 로드맵

### Phase 1: 분석 및 프로토타입 ✅
- [x] 이론적 분석 엔진 개발
- [x] CLI 기반 그룹 배치 프로그램 개발
- [x] 유전 알고리즘 기초 최적화

### Phase 2: 프론트엔드 개발 ✅
- [x] **Next.js 프로젝트 세팅** (TypeScript + Tailwind)
- [x] **UI/UX 디자인** (직관적인 웹 인터페이스)
- [x] **고급 알고리즘 구현** (이중 최적화 시스템)
- [x] **반응형 웹 구현** (모바일/데스크탑 호환)
- [x] **실시간 통계 대시보드** (히스토그램, 성별 균형 등)
- [x] **세션 기반 상태 관리** (새로고침 안전성)

### Phase 3: 백엔드 개발 🚧
- [ ] **FastAPI 프로젝트 세팅**
- [ ] **데이터베이스 모델링** (PostgreSQL)
- [ ] **사용자 인증 시스템** (JWT)
- [ ] **RESTful API 개발**
- [ ] **멀티 이벤트 지원** (여러 모임 동시 관리)

### Phase 4: 고급 기능 및 배포 📋
- [ ] **AI 기반 매칭 고도화** (머신러닝 적용)
- [ ] **실시간 협업 기능** (WebSocket)
- [ ] **데이터 분석 도구** (Excel 내보내기)
- [ ] **클라우드 배포** (Vercel + Railway)
- [ ] **모바일 앱 개발** (React Native)

### Phase 5: 비즈니스 확장 📋
- [ ] **SaaS 플랫폼 구축**
- [ ] **기업용 맞춤 솔루션**
- [ ] **API 서비스 제공**
- [ ] **글로벌 다국어 지원**

## 🤝 기여 방법

1. 이 저장소를 Fork 합니다
2. 새로운 기능 브랜치를 생성합니다 (`git checkout -b feature/AmazingFeature`)
3. 변경사항을 커밋합니다 (`git commit -m 'Add some AmazingFeature'`)
4. 브랜치에 Push 합니다 (`git push origin feature/AmazingFeature`)
5. Pull Request를 생성합니다

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다. 자세한 내용은 `LICENSE` 파일을 참조하세요.

## 📞 연락처

프로젝트에 대한 질문이나 제안이 있으시면 언제든 연락주세요!

---

🎉 **모든 사람이 새로운 만남을 경험할 수 있는 세상을 만들어갑시다!** 