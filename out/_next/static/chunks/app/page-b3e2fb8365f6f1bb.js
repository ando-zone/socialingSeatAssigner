(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{740:(e,t,s)=>{Promise.resolve().then(s.bind(s,3792))},3792:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var l=s(5155),a=s(2115),r=s(5695),n=s(2998),i=s(2945);function c(){let e=(0,r.useRouter)(),[t,s]=(0,a.useState)([]),[c,d]=(0,a.useState)(""),[o,m]=(0,a.useState)("male"),[x,u]=(0,a.useState)("extrovert"),[h,g]=(0,a.useState)(1),[p,b]=(0,a.useState)(4),[j,f]=(0,a.useState)(!1),[v,N]=(0,a.useState)("auto"),[y,w]=(0,a.useState)(3),[S,C]=(0,a.useState)([4,4,4]),[k,D]=(0,a.useState)(""),[_,O]=(0,a.useState)(!1),[I,M]=(0,a.useState)(!1),[E,J]=(0,a.useState)([]),P=()=>S.reduce((e,t)=>e+t,0),B=async()=>{if(t.length<2)return void alert("최소 2명 이상의 참가자가 필요합니다.");if("manual"===v){let e=S.reduce((e,t)=>e+t,0);if(e<t.length)return void alert("설정된 그룹 크기의 총합(".concat(e,"명)이 참가자 수(").concat(t.length,"명)보다 적습니다."))}f(!0);try{(0,i.$p)("round_start","".concat(h,"라운드 시작 전"));let s="auto"===v?p:S,l=(0,n.B)(t,s,h),a=(0,n.$q)(t,l.groups,h);localStorage.setItem("groupingResult",JSON.stringify(l)),localStorage.setItem("participants",JSON.stringify(a)),localStorage.setItem("currentRound",String(h+1)),setTimeout(()=>{(0,i.$p)("round_complete","".concat(h,"라운드 배치 완료"))},100),e.push("/result")}catch(e){alert(e.message||"그룹 배치 중 오류가 발생했습니다."),console.error(e)}finally{f(!1)}};(0,a.useEffect)(()=>{let e=localStorage.getItem("participants"),t=localStorage.getItem("currentRound");if(e){let l=JSON.parse(e),a=t?Number(t):1,r=(0,n.Nh)(l,a);s(r),localStorage.setItem("participants",JSON.stringify(r))}t&&g(Number(t))},[]);let L=async e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){try{await (0,i.q3)(s),alert("데이터를 성공적으로 가져왔습니다!"),window.location.reload()}catch(e){alert("데이터 가져오기 실패: "+e.message)}e.target.value=""}},R=()=>{J((0,i.Sq)())};return(0,a.useEffect)(()=>{R()},[t,h]),(0,a.useEffect)(()=>{J((0,i.Sq)())},[]),(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-8 text-gray-800",children:"모임 자리 배치 프로그램"}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"참석자 추가"}),(0,l.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"그룹 설정 방식"}),(0,l.jsxs)("div",{className:"flex gap-6 mb-4",children:[(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",value:"auto",checked:"auto"===v,onChange:e=>N(e.target.value),className:"mr-2"}),(0,l.jsx)("span",{children:"자동 (동일한 크기)"})]}),(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",value:"manual",checked:"manual"===v,onChange:e=>N(e.target.value),className:"mr-2"}),(0,l.jsx)("span",{children:"수동 (개별 설정)"})]})]}),"auto"===v?(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"그룹 크기"}),(0,l.jsxs)("select",{value:p,onChange:e=>b(Number(e.target.value)),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[(0,l.jsx)("option",{value:3,children:"3명"}),(0,l.jsx)("option",{value:4,children:"4명"}),(0,l.jsx)("option",{value:5,children:"5명"}),(0,l.jsx)("option",{value:6,children:"6명"})]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["예상 그룹 수: ",t.length>0?Math.ceil(t.length/p):0,"개"]})]})}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"그룹 수"}),(0,l.jsx)("select",{value:y,onChange:e=>(e=>{w(e);let t=[...S];if(e>S.length)for(;t.length<e;)t.push(4);else e<S.length&&t.splice(e);C(t)})(Number(e.target.value)),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[2,3,4,5,6,7,8].map(e=>(0,l.jsxs)("option",{value:e,children:[e,"개 그룹"]},e))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"각 그룹별 인원 수"}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:S.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("label",{className:"text-sm text-gray-600 min-w-[60px]",children:["그룹 ",t+1,":"]}),(0,l.jsx)("input",{type:"number",min:"2",max:"10",value:e,onChange:e=>((e,t)=>{let s=[...S];s[e]=t,C(s)})(t,Number(e.target.value)),className:"border border-gray-300 rounded-md px-2 py-1 w-16 text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm text-gray-500",children:"명"})]},t))}),(0,l.jsxs)("div",{className:"mt-2 flex justify-between text-sm",children:[(0,l.jsxs)("span",{className:"text-gray-600",children:["총 예상 인원: ",(0,l.jsxs)("span",{className:"font-medium",children:[P(),"명"]})]}),(0,l.jsxs)("span",{className:"text-gray-600",children:["현재 참가자: ",(0,l.jsxs)("span",{className:"font-medium",children:[t.length,"명"]})]}),P()<t.length&&(0,l.jsxs)("span",{className:"text-red-500 font-medium",children:["인원 부족! (",t.length-P(),"명 더 필요)"]}),P()>t.length&&(0,l.jsxs)("span",{className:"text-orange-500 font-medium",children:["여유 인원: ",P()-t.length,"명"]})]})]})]})]}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("div",{className:"relative bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"bg-white bg-opacity-20 rounded-full p-3 animate-pulse",children:(0,l.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-blue-100",children:"현재 진행중"}),(0,l.jsxs)("div",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-300 to-orange-300 bg-clip-text text-transparent",children:[h,"라운드"]})]})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("div",{className:"text-blue-100 text-sm",children:"참가자"}),(0,l.jsxs)("div",{className:"text-2xl font-bold",children:[t.length,"명"]}),t.length>=2&&(0,l.jsxs)("div",{className:"inline-flex items-center mt-1 px-2 py-1 bg-green-500 bg-opacity-20 rounded-full",children:[(0,l.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1 animate-ping"}),(0,l.jsx)("span",{className:"text-xs text-green-200",children:"배치 가능"})]})]})]}),t.length>0&&(0,l.jsx)("div",{className:"mt-4 pt-4 border-t border-white border-opacity-20",children:(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-blue-100",children:"auto"===v?"예상 그룹: ".concat(Math.ceil(t.length/p),"개 (").concat(p,"명씩)"):"설정 그룹: ".concat(y,"개 (총 ").concat(P(),"명)")}),"manual"===v&&P()!==t.length&&(0,l.jsx)("span",{className:"font-medium px-2 py-1 rounded-full text-xs ".concat(P()<t.length?"bg-red-500 bg-opacity-20 text-red-200":"bg-yellow-500 bg-opacity-20 text-yellow-200"),children:P()<t.length?"".concat(t.length-P(),"명 초과"):"".concat(P()-t.length,"명 여유")})]})}),(0,l.jsx)("div",{className:"absolute top-0 right-0 -mr-2 -mt-2 w-16 h-16 bg-white bg-opacity-10 rounded-full animate-bounce"}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 -ml-2 -mb-2 w-12 h-12 bg-white bg-opacity-10 rounded-full animate-pulse"}),(0,l.jsx)("div",{className:"absolute top-1/2 right-4 w-3 h-3 bg-yellow-300 rounded-full animate-ping opacity-75"})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"이름",value:c,onChange:e=>d(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"male",children:"남성"}),(0,l.jsx)("option",{value:"female",children:"여성"})]}),(0,l.jsxs)("select",{value:x,onChange:e=>u(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"extrovert",children:"외향형"}),(0,l.jsx)("option",{value:"introvert",children:"내향형"})]}),(0,l.jsx)("button",{onClick:()=>{if(c.trim()){let e={id:Date.now().toString(),name:c.trim(),gender:o,mbti:x,meetingsByRound:{},allMetPeople:[],groupHistory:[]};s([...t,e]),d(""),setTimeout(()=>{(0,i.$p)("participant_add","참가자 추가: ".concat(e.name))},100)}},className:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md",children:"추가"})]}),(0,l.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,l.jsx)("h3",{className:"text-lg font-medium",children:"벌크 추가"}),(0,l.jsx)("button",{onClick:()=>O(!_),className:"text-blue-500 hover:text-blue-700 text-sm",children:_?"숨기기":"여러 명 한번에 추가"})]}),_&&(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,l.jsx)("p",{className:"mb-2",children:"지원하는 형식:"}),(0,l.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[(0,l.jsx)("li",{children:"이름만: 김철수 (기본값: 남성, 외향형)"}),(0,l.jsx)("li",{children:"공백 구분: 김철수 남 외향"}),(0,l.jsx)("li",{children:"쉼표 구분: 김철수,남,외향"}),(0,l.jsx)("li",{children:"성별: 남/여 또는 male/female 또는 m/f"}),(0,l.jsx)("li",{children:"MBTI: 외향/내향 또는 extrovert/introvert 또는 e/i"})]})]}),(0,l.jsx)("textarea",{value:k,onChange:e=>D(e.target.value),placeholder:"김철수 이영희,여,내향 박민수 남 외향 최지은 여 내향",className:"w-full h-32 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>{if(!k.trim())return;let e=k.trim().split("\n"),l=[];e.forEach((e,t)=>{let s=e.trim();if(!s)return;let a="",r="male",n="extrovert";if(s.includes(",")){let e=s.split(",").map(e=>e.trim());if(a=e[0]||"",e[1]){let t=e[1].toLowerCase();(t.includes("여")||t.includes("female")||t.includes("f"))&&(r="female")}if(e[2]){let t=e[2].toLowerCase();(t.includes("내향")||t.includes("introvert")||t.includes("i"))&&(n="introvert")}}else if(s.includes(" ")){let e=s.split(/\s+/);if(a=e[0]||"",e[1]){let t=e[1].toLowerCase();(t.includes("여")||t.includes("female")||t.includes("f"))&&(r="female")}if(e[2]){let t=e[2].toLowerCase();(t.includes("내향")||t.includes("introvert")||t.includes("i"))&&(n="introvert")}}else a=s;a&&l.push({id:"".concat(Date.now(),"-").concat(t),name:a,gender:r,mbti:n,meetingsByRound:{},allMetPeople:[],groupHistory:[]})}),l.length>0&&(s([...t,...l]),D(""),O(!1),setTimeout(()=>{(0,i.$p)("bulk_add","벌크 추가: ".concat(l.length,"명"))},100))},className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-md text-sm",children:"벌크 추가"}),(0,l.jsx)("button",{onClick:()=>{D(""),O(!1)},className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-md text-sm",children:"취소"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,l.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["참석자 목록 (",t.length,"명)"]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.sort((e,t)=>e.name.localeCompare(t.name,"ko")).map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:e.name}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["male"===e.gender?"남성":"여성"," \xb7 "," ","extrovert"===e.mbti?"외향형":"내향형"]}),e.allMetPeople&&e.allMetPeople.length>0&&(0,l.jsxs)("div",{className:"text-xs text-blue-600",children:["만난 사람: ",e.allMetPeople.length,"명"]}),e.groupHistory&&e.groupHistory.length>0&&(0,l.jsxs)("div",{className:"text-xs text-purple-600",children:["그룹 히스토리: ",e.groupHistory.slice(-3).join(", ")]})]}),(0,l.jsx)("button",{onClick:()=>(e=>{let l=t.find(t=>t.id===e);if(l){let t=JSON.parse(localStorage.getItem("exitedParticipants")||"{}");t[e]={name:l.name,gender:l.gender},localStorage.setItem("exitedParticipants",JSON.stringify(t)),(0,i.$p)("participant_remove","참가자 제거: ".concat(l.name))}s(t.filter(t=>t.id!==e))})(e.id),className:"text-red-500 hover:text-red-700",children:"삭제"})]},e.id))}),t.length>=2&&(0,l.jsx)("div",{className:"mt-6 text-center",children:(0,l.jsx)("button",{onClick:B,disabled:j,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-medium py-3 px-6 rounded-md",children:j?"배치 중...":"그룹 배치하기"})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"데이터 백업 및 복원"}),(0,l.jsx)("button",{onClick:()=>M(!I),className:"text-blue-500 hover:text-blue-700 text-sm",children:I?"숨기기":"백업 메뉴 열기"})]}),I&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,l.jsxs)("h3",{className:"text-lg font-medium mb-3 flex items-center",children:[(0,l.jsx)("span",{className:"text-blue-500 mr-2",children:"\uD83D\uDCBE"}),"데이터 내보내기 / 가져오기"]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:()=>{(0,i.Uh)()},className:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md",children:"데이터 내보내기 (JSON)"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"file",accept:".json",onChange:L,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,l.jsx)("button",{className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-md",children:"데이터 가져오기 (JSON)"})]})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"\uD83D\uDCA1 중요한 데이터는 정기적으로 내보내기하여 백업하세요."})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,l.jsxs)("h3",{className:"text-lg font-medium flex items-center",children:[(0,l.jsx)("span",{className:"text-orange-500 mr-2",children:"\uD83D\uDCF8"}),"자동 스냅샷 복원"]}),(0,l.jsx)("button",{onClick:R,className:"text-blue-500 hover:text-blue-700 text-sm",children:"새로고침"})]}),0===E.length?(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:"저장된 스냅샷이 없습니다."}):(0,l.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:E.slice(-10).reverse().map(e=>(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 border border-gray-200 rounded-md hover:bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-medium text-sm",children:e.description}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:(0,i.r6)(e.timestamp)})]}),(0,l.jsx)("button",{onClick:()=>{var t;return t=e.id,void(confirm("이 시점으로 복원하시겠습니까? 현재 데이터는 백업됩니다.")&&((0,i.n5)(t)?(alert("복원이 완료되었습니다!"),window.location.reload()):alert("복원 중 오류가 발생했습니다.")))},className:"bg-orange-500 hover:bg-orange-600 text-white text-xs py-1 px-3 rounded",children:"복원"})]},e.id))}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-3",children:"\uD83D\uDCA1 참가자 추가/제거, 그룹 배치, 위치 변경 시 자동으로 스냅샷이 생성됩니다."})]})]})]})]})})}}},e=>{e.O(0,[220,441,964,358],()=>e(e.s=740)),_N_E=e.O()}]);