"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{2945:(e,t,n)=>{function o(){return{participants:JSON.parse(localStorage.getItem("participants")||"[]"),groupingResult:JSON.parse(localStorage.getItem("groupingResult")||"null"),currentRound:localStorage.getItem("currentRound"),exitedParticipants:JSON.parse(localStorage.getItem("exitedParticipants")||"{}"),groupSettings:JSON.parse(localStorage.getItem("groupSettings")||"null"),timestamp:new Date().toISOString(),version:"1.0"}}function r(e,t){let n=l(),r={id:Date.now(),timestamp:new Date().toISOString(),eventType:e,description:t,data:o()};n.push(r),n.length>50&&n.shift(),localStorage.setItem("snapshots",JSON.stringify(n)),console.log("\uD83D\uDCF8 스냅샷 생성: ".concat(t))}function l(){return JSON.parse(localStorage.getItem("snapshots")||"[]")}function a(e){let t=l().find(t=>t.id===e);if(!t)return console.error("스냅샷을 찾을 수 없습니다:",e),!1;try{return r("restore_backup","".concat(c(t.timestamp)," 복원 전 백업")),localStorage.setItem("participants",JSON.stringify(t.data.participants)),localStorage.setItem("groupingResult",JSON.stringify(t.data.groupingResult)),localStorage.setItem("currentRound",t.data.currentRound||"1"),localStorage.setItem("exitedParticipants",JSON.stringify(t.data.exitedParticipants)),t.data.groupSettings&&localStorage.setItem("groupSettings",JSON.stringify(t.data.groupSettings)),console.log("\uD83D\uDD04 스냅샷 복원 완료: ".concat(t.description)),!0}catch(e){return console.error("스냅샷 복원 중 오류:",e),!1}}function i(){let e=o(),t=new Date().toISOString().slice(0,16).replace("T","_").replace(":","-"),n="모임데이터_".concat(t,".json"),r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=URL.createObjectURL(r),a=document.createElement("a");a.href=l,a.download=n,a.click(),URL.revokeObjectURL(l),console.log("\uD83D\uDCBE 데이터 내보내기 완료: ".concat(n))}function g(e){return new Promise((t,n)=>{let o=new FileReader;o.onload=e=>{try{var o;let n=JSON.parse(null==(o=e.target)?void 0:o.result);if(!n.participants||!Array.isArray(n.participants))throw Error("잘못된 데이터 형식입니다.");r("import_backup","데이터 가져오기 전 백업"),localStorage.setItem("participants",JSON.stringify(n.participants)),localStorage.setItem("groupingResult",JSON.stringify(n.groupingResult)),localStorage.setItem("currentRound",n.currentRound||"1"),localStorage.setItem("exitedParticipants",JSON.stringify(n.exitedParticipants||{})),n.groupSettings&&localStorage.setItem("groupSettings",JSON.stringify(n.groupSettings)),console.log("\uD83D\uDCE5 데이터 가져오기 완료"),t(!0)}catch(e){console.error("데이터 가져오기 중 오류:",e),n(e)}},o.onerror=()=>{n(Error("파일 읽기 중 오류가 발생했습니다."))},o.readAsText(e)})}function c(e){return new Date(e).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}n.d(t,{$p:()=>r,Sq:()=>l,Uh:()=>i,n5:()=>a,q3:()=>g,r6:()=>c})},2998:(e,t,n)=>{function o(e,t,n){if(void 0===n)return e.allMetPeople.includes(t.id);let o=new Set;return Object.entries(e.meetingsByRound).forEach(e=>{let[t,r]=e;parseInt(t)<n&&r.forEach(e=>o.add(e))}),o.has(t.id)}function r(e){let t=new Set;Object.values(e.meetingsByRound).forEach(e=>{e.forEach(e=>t.add(e))}),e.allMetPeople=Array.from(t)}function l(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.map(e=>(e.meetingsByRound||(e.meetingsByRound={}),e.allMetPeople||(e.allMetPeople=[]),e.groupHistory||(e.groupHistory=[]),e))}function a(e,t){let n=e.groupHistory;return n.length>0&&n[n.length-1]===t}function i(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e.length<2)throw Error("최소 2명 이상의 참가자가 필요합니다.");let l=(t=Array.isArray(n)?n:Array(Math.ceil(e.length/n)).fill(n)).reduce((e,t)=>e+t,0);if(l<e.length)throw Error("설정된 그룹 크기의 총합(".concat(l,"명)이 참가자 수(").concat(e.length,"명)보다 적습니다."));let i=t.length;console.log("그룹 배치 시작: 참가자 ".concat(e.length,"명")),console.log("그룹 구성: ".concat(t.map((e,t)=>"그룹".concat(t+1,"(").concat(e,"명)")).join(", "))),console.log("총 ".concat(i,"개 그룹, 예상 총 인원: ").concat(l,"명"));let c=Array.from({length:i},()=>[]);[...e].sort(()=>Math.random()-.5).forEach(e=>{let t=0,n=c[0].length,o=!1;for(let r=0;r<i;r++){let l=!a(e,r+1);l&&!o?(t=r,n=c[r].length,o=!0):l&&o?c[r].length<n&&(t=r,n=c[r].length):!o&&c[r].length<n&&(t=r,n=c[r].length)}c[t].push(e)}),console.log("초기 배치 완료:",c.map(e=>e.length));let s=0,u=0;c.forEach((e,t)=>{let n=t+1;e.forEach(e=>{u++,!a(e,n)&&s++})}),console.log("그룹 번호 회피 성공률: ".concat(u>0?Math.round(s/u*100):0,"% (").concat(s,"/").concat(u,")")),function(e,t,n){for(let t=0;t<100;t++){let t=!1;for(let o=0;o<e.length;o++){for(let r=o+1;r<e.length;r++){let l=e[o],a=e[r];if(0!==l.length&&0!==a.length){for(let e=0;e<l.length;e++){for(let o=0;o<a.length;o++){let r=l[e],i=a[o],c=g(l,n)+g(a,n);if(l[e]=i,a[o]=r,g(l,n)+g(a,n)>c){t=!0;break}l[e]=r,a[o]=i}if(t)break}if(t)break}}if(t)break}if(!t)break}}(c,0,r),function(e,t){for(let n=0;n<50;n++){let n=!1;for(let o=0;o<e.length;o++)for(let r=0;r<e.length;r++){if(o===r)continue;let l=e[o],a=e[r],i=t[o]||0,g=t[r]||0;if(l.length>i&&a.length<g){let e=l.pop();e&&(a.push(e),n=!0)}}for(let t=0;t<e.length;t++){for(let o=t+1;o<e.length;o++){let r=e[t],l=e[o];if(0===r.length||0===l.length)continue;let a=r.filter(e=>"male"===e.gender).length,i=r.filter(e=>"female"===e.gender).length,g=l.filter(e=>"male"===e.gender).length,c=l.filter(e=>"female"===e.gender).length;if(Math.abs(a-i)>1||Math.abs(g-c)>1)for(let e=0;e<r.length;e++){for(let t=0;t<l.length;t++)if(r[e].gender!==l[t].gender){let o=Math.abs(a-i)+Math.abs(g-c),s=r[e];r[e]=l[t],l[t]=s;let u=r.filter(e=>"male"===e.gender).length,h=r.filter(e=>"female"===e.gender).length,f=l.filter(e=>"male"===e.gender).length;if(Math.abs(u-h)+Math.abs(f-l.filter(e=>"female"===e.gender).length)<o){n=!0;break}{let n=r[e];r[e]=l[t],l[t]=n}}if(n)break}if(n)break}if(n)break}if(!n)break}}(c,t),console.log("최적화 완료:",c.map(e=>e.length));let h=c.map((e,t)=>{let n=e.filter(e=>"male"===e.gender).length,l=e.filter(e=>"female"===e.gender).length,a=e.filter(e=>"extrovert"===e.mbti).length,i=e.filter(e=>"introvert"===e.mbti).length,g=0;for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++)!o(e[t],e[n],r)&&g++;return{id:t+1,members:e,maleCount:n,femaleCount:l,extrovertCount:a,introvertCount:i,newMeetingsCount:g}}).filter(e=>e.members.length>0),f=0,d=0,m=0;console.log("=== 배치 요약에서 새로운 만남 계산 시작 ===");let p=t=>{let n=e.find(e=>e.id===t);return n?n.name:"Unknown(".concat(t.slice(-4),")")};return h.forEach(e=>{let t=e.members,n=0;console.log("그룹 ".concat(e.id," (").concat(t.length,"명): [").concat(t.map(e=>e.name).join(", "),"]"));for(let e=0;e<t.length;e++)for(let l=e+1;l<t.length;l++){let a=t[e],i=t[l],g=o(a,i,r),c=a.allMetPeople.map(e=>p(e));console.log("  ".concat(a.name," vs ").concat(i.name,": 이전에 만남? ").concat(g)),console.log("    ".concat(a.name,"의 만남기록: [").concat(c.join(", "),"]")),g||(f++,n++,console.log("    -> 새로운 만남! ✨"))}console.log("  그룹 ".concat(e.id," 새로운 만남: ").concat(n,"쌍")),t.length>0&&(d+=1-Math.abs(e.maleCount-e.femaleCount)/t.length,m+=1-Math.abs(e.extrovertCount-e.introvertCount)/t.length)}),console.log("배치 요약 총 새로운 만남: ".concat(f,"쌍")),console.log("=== 배치 요약 계산 완료 ==="),console.log("최종 그룹 수: ".concat(h.length)),console.log("각 그룹 크기:",h.map(e=>e.members.length)),{groups:h,round:r,summary:{totalGroups:h.length,avgGroupSize:h.length>0?e.length/h.length:0,genderBalanceScore:h.length>0?Math.round(d/h.length*100):0,mbtiBalanceScore:h.length>0?Math.round(m/h.length*100):0,newMeetingsCount:f}}}function g(e,t){let n=0;for(let r=0;r<e.length;r++)for(let l=r+1;l<e.length;l++){let a=e[r],i=e[l];if(!o(a,i,t)){let e=10;a.gender!==i.gender&&(e+=15),n+=e}}return n}function c(e,t,n){let o=e.map(e=>({...e,meetingsByRound:{...e.meetingsByRound},allMetPeople:[...e.allMetPeople],groupHistory:[...e.groupHistory]}));return t.forEach(e=>{e.members.forEach(t=>{let n=o.find(e=>e.id===t.id);n&&n.groupHistory.push(e.id)});for(let t=0;t<e.members.length;t++)for(let l=t+1;l<e.members.length;l++){let a=o.find(n=>n.id===e.members[t].id),i=o.find(t=>t.id===e.members[l].id);a&&i&&(a.meetingsByRound[n]||(a.meetingsByRound[n]=[]),i.meetingsByRound[n]||(i.meetingsByRound[n]=[]),a.meetingsByRound[n].includes(i.id)||a.meetingsByRound[n].push(i.id),i.meetingsByRound[n].includes(a.id)||i.meetingsByRound[n].push(a.id),r(a),r(i))}}),o}n.d(t,{$q:()=>c,B:()=>i,Nh:()=>l})},5695:(e,t,n)=>{var o=n(8999);n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}}),n.o(o,"useSearchParams")&&n.d(t,{useSearchParams:function(){return o.useSearchParams}})}}]);